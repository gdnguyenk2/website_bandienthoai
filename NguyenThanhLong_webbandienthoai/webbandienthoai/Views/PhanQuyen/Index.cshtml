@using webbandienthoai.Models;
@model IEnumerable<ThanhVien>
@{
    ViewBag.Title = "Phan Quyền";
    Layout = "~/Views/Shared/_Layout_Admin.cshtml";
    //khởi tạo control webgrid
    WebGrid grid = new WebGrid(source: Model, rowsPerPage: 6);
}
<style>
    .Footer {
        height: 100px;
    }

        .Footer a {
            display: inline-block;
            text-decoration: none;
            border: 2px solid #808080;
            color: #ffffff;
            background: #2987f0;
            padding: 5px 10px;
        }

    .Table, th, tr, td {
        text-align: center;
        border: 1px solid #000000;
        font-size: 16px;
        padding: 5px 10px;
    }
    .Table{
        width:100%;
    }
    .Header {
        background-color: #e6dada;
    }

    img {
        width: 150px;
        height: 120px;
    }
</style>
<h2 style="margin:10px 0">Phân Quyền</h2>
<br />
@grid.GetHtml(
    tableStyle: "Table",
    headerStyle: "Header",
    footerStyle: "Footer",
    rowStyle: "Row",
    alternatingRowStyle: "gridAltRow",
    columns: grid.Columns(
    grid.Column("MaTV", "Mã Thành Viên"),
    grid.Column("HinhDaiDien","Ảnh Đại Diện",format:p=> @Html.Raw("<img src=\"../Content/Images/Members/" + p.HinhDaiDien + "\" style=\"border-radius: 50%; width: 50px; height: 50px;\">")),
    grid.Column("MaLoaiTV", "Loại Thành Viên", item =>
    {
        if (item.MaLoaiTV != null)
        {
            if (item.MaLoaiTV == 1)
                return "Quản trị Viên";
            else if (item.MaLoaiTV == 2)
                return "Khách Hàng";
        }
        return "";
    }),
    grid.Column("TaiKhoan", "Tên Tài Khoản"),
    grid.Column("Email", "Email"),
    grid.Column("SoDienThoai", "Số Điện Thoại"),
    grid.Column(format: p =>
    {
        if (p != null)
        {
            if (ViewBag.MaTV != p.MaTV)
            {
                return Html.ActionLink("Cấp Quyền","CapQuyen" ,"PhanQuyen", new { MaTV = p.MaTV }, new { style = "display: block;text-decoration: none;background-color: #0094ff;padding:5px 8px;border:1px solid #00ffff;border-radius:3px 4px;" });
            }
        }
        return "";
    })

    )
)
<script>
    $(document).ready(function () {
        var capquyen = '@Html.Raw(HttpUtility.JavaScriptStringEncode((string)TempData["capquyen"]))';
        if (capquyen) {
            alert(capquyen);
        }
    });
</script>